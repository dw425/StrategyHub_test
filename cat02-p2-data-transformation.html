<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Data Transformation (dbt) | Data Engineering | Strategy Hub</title>
    <style>
        :root {
            --brand-orange: #FF9900;
            --cat-primary: #06B6D4;
            --cat-light: #22D3EE;
            --cat-dark: #0891B2;
            --cat-glow: rgba(6, 182, 212, 0.15);
            --page-primary: #F97316;
            --page-light: #FB923C;
            --page-glow: rgba(249, 115, 22, 0.15);
            --bg-dark: #0a0a0f;
            --bg-card: #12121a;
            --bg-card-alt: #1a1a2e;
            --bg-hover: #252538;
            --border-color: #2a2a3e;
            --text-primary: #ffffff;
            --text-secondary: #a0a0b0;
            --text-muted: #6a6a7a;
            --green: #10B981;
            --yellow: #F59E0B;
            --red: #EF4444;
            --blue: #3B82F6;
            --cyan: #06B6D4;
            --pink: #EC4899;
            --violet: #8B5CF6;
            --sidebar-width: 260px;
            --header-height: 60px;
        }
        
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; background: var(--bg-dark); color: var(--text-primary); line-height: 1.6; }
        
        header { background: var(--bg-card); border-bottom: 1px solid var(--border-color); padding: 16px 32px; position: fixed; top: 0; left: 0; right: 0; z-index: 1000; height: var(--header-height); display: flex; justify-content: space-between; align-items: center; }
        .logo { font-size: 20px; font-weight: 700; text-decoration: none; color: inherit; }
        .logo span { color: var(--brand-orange); }
        .breadcrumb { display: flex; align-items: center; gap: 8px; font-size: 13px; }
        .breadcrumb a { color: var(--text-secondary); text-decoration: none; }
        .breadcrumb a:hover { color: var(--brand-orange); }
        .breadcrumb .sep { color: var(--text-muted); }
        .breadcrumb .current { color: var(--text-primary); }
        
        .sidebar { position: fixed; top: var(--header-height); left: 0; width: var(--sidebar-width); height: calc(100vh - var(--header-height)); background: var(--bg-card); border-right: 1px solid var(--border-color); overflow-y: auto; z-index: 100; padding: 24px 0; }
        .sidebar-section { margin-bottom: 24px; }
        .sidebar-title { font-size: 11px; text-transform: uppercase; letter-spacing: 1.5px; color: var(--page-light); padding: 0 24px; margin-bottom: 8px; }
        .sidebar-nav { list-style: none; }
        .sidebar-nav a { display: flex; align-items: center; gap: 8px; padding: 10px 24px; color: var(--text-secondary); text-decoration: none; font-size: 12px; border-left: 3px solid transparent; transition: all 0.2s; }
        .sidebar-nav a:hover { background: var(--bg-hover); color: var(--text-primary); }
        .sidebar-nav a.active { background: var(--page-glow); color: var(--page-light); border-left-color: var(--page-light); }
        .nav-icon { font-size: 14px; width: 24px; text-align: center; }
        
        .main-wrapper { margin-left: var(--sidebar-width); margin-top: var(--header-height); }
        .main-content { max-width: 1100px; padding: 32px; }
        
        .hero-compact { display: grid; grid-template-columns: 1fr 1fr; gap: 32px; margin-bottom: 32px; padding: 28px; background: var(--bg-card); border: 1px solid var(--border-color); border-radius: 16px; position: relative; }
        .hero-compact::before { content: ''; position: absolute; top: 0; left: 0; right: 0; height: 3px; background: linear-gradient(90deg, var(--page-primary), var(--page-light), var(--yellow)); }
        .hero-tag { display: inline-flex; background: var(--page-glow); border: 1px solid var(--page-primary); padding: 5px 14px; border-radius: 9999px; font-size: 12px; color: var(--page-light); margin-bottom: 12px; width: fit-content; }
        .hero-left h1 { font-size: 28px; margin-bottom: 8px; }
        .hero-left p { font-size: 13px; color: var(--text-secondary); line-height: 1.6; }
        .hero-metrics { display: grid; grid-template-columns: 1fr 1fr; gap: 12px; }
        .hero-metric { background: var(--bg-card-alt); border: 1px solid var(--border-color); border-radius: 12px; padding: 16px; text-align: center; position: relative; }
        .hero-metric::before { content: ''; position: absolute; bottom: 0; left: 0; right: 0; height: 3px; background: var(--page-primary); border-radius: 0 0 12px 12px; }
        .hero-metric-value { font-size: 24px; font-weight: 700; color: var(--page-light); }
        .hero-metric-label { font-size: 10px; color: var(--text-muted); margin-top: 4px; }
        
        .module { margin-bottom: 32px; padding-top: 24px; border-top: 1px solid var(--border-color); }
        .module:first-of-type { border-top: none; padding-top: 0; }
        .module-header { display: flex; align-items: center; gap: 16px; margin-bottom: 20px; }
        .module-icon { width: 52px; height: 52px; background: var(--page-glow); border: 2px solid var(--page-primary); border-radius: 14px; display: flex; align-items: center; justify-content: center; font-size: 26px; }
        .module-info h2 { font-size: 20px; margin-bottom: 4px; }
        .module-info p { font-size: 12px; color: var(--text-muted); }
        
        .overview-content { background: var(--bg-card); border: 1px solid var(--border-color); border-radius: 12px; padding: 24px; margin-bottom: 20px; }
        .overview-content h3 { font-size: 16px; margin-bottom: 12px; color: var(--page-light); }
        .overview-content p { font-size: 13px; color: var(--text-secondary); line-height: 1.7; margin-bottom: 12px; }
        .overview-content p:last-child { margin-bottom: 0; }
        
        .concept-grid { display: grid; grid-template-columns: repeat(4, 1fr); gap: 16px; margin-bottom: 20px; }
        .concept-card { background: var(--bg-card); border: 1px solid var(--border-color); border-radius: 12px; padding: 20px; text-align: center; }
        .concept-icon { font-size: 32px; margin-bottom: 12px; }
        .concept-title { font-size: 14px; font-weight: 600; margin-bottom: 6px; }
        .concept-desc { font-size: 10px; color: var(--text-secondary); line-height: 1.5; }
        
        .viz-container { background: var(--bg-card); border: 1px solid var(--border-color); border-radius: 16px; overflow: hidden; margin-bottom: 20px; }
        .viz-header { padding: 12px 20px; background: var(--bg-card-alt); border-bottom: 1px solid var(--border-color); display: flex; justify-content: space-between; align-items: center; }
        .viz-title { font-size: 13px; font-weight: 600; display: flex; align-items: center; gap: 8px; }
        .viz-badge { font-size: 11px; padding: 4px 12px; border-radius: 9999px; background: var(--page-glow); color: var(--page-light); }
        .viz-canvas { padding: 20px; background: var(--bg-dark); }
        
        .layer-grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 16px; margin-bottom: 20px; }
        .layer-card { background: var(--bg-card); border: 1px solid var(--border-color); border-radius: 12px; overflow: hidden; }
        .layer-header { padding: 16px; border-bottom: 1px solid var(--border-color); }
        .layer-header.staging { background: linear-gradient(135deg, rgba(59,130,246,0.2), transparent); border-left: 3px solid var(--blue); }
        .layer-header.intermediate { background: linear-gradient(135deg, rgba(245,158,11,0.2), transparent); border-left: 3px solid var(--yellow); }
        .layer-header.marts { background: linear-gradient(135deg, rgba(16,185,129,0.2), transparent); border-left: 3px solid var(--green); }
        .layer-title { font-size: 14px; font-weight: 600; margin-bottom: 4px; }
        .layer-subtitle { font-size: 10px; color: var(--text-muted); }
        .layer-body { padding: 16px; }
        .layer-desc { font-size: 11px; color: var(--text-secondary); line-height: 1.5; margin-bottom: 12px; }
        .layer-examples { list-style: none; }
        .layer-examples li { font-size: 10px; padding: 4px 0; color: var(--text-muted); display: flex; align-items: center; gap: 6px; font-family: monospace; }
        .layer-examples li::before { content: '‚Üí'; color: var(--page-light); }
        
        .code-example { background: var(--bg-card); border: 1px solid var(--border-color); border-radius: 12px; overflow: hidden; margin-bottom: 20px; }
        .code-example-header { padding: 12px 16px; background: var(--bg-card-alt); border-bottom: 1px solid var(--border-color); display: flex; justify-content: space-between; align-items: center; }
        .code-example-title { font-size: 12px; font-weight: 600; }
        .code-example-file { font-size: 10px; color: var(--text-muted); font-family: monospace; }
        .code-example-content { padding: 16px; font-family: 'Monaco', 'Consolas', monospace; font-size: 11px; line-height: 1.7; background: var(--bg-dark); overflow-x: auto; }
        .code-comment { color: #6A737D; }
        .code-keyword { color: #FF7B72; }
        .code-string { color: #A5D6FF; }
        .code-function { color: #D2A8FF; }
        .code-jinja { color: #FFA657; }
        
        .feature-grid { display: grid; grid-template-columns: repeat(2, 1fr); gap: 16px; margin-bottom: 20px; }
        .feature-card { background: var(--bg-card); border: 1px solid var(--border-color); border-radius: 12px; padding: 20px; }
        .feature-header { display: flex; align-items: center; gap: 12px; margin-bottom: 12px; }
        .feature-icon { width: 40px; height: 40px; background: var(--page-glow); border-radius: 10px; display: flex; align-items: center; justify-content: center; font-size: 20px; }
        .feature-title { font-size: 14px; font-weight: 600; }
        .feature-desc { font-size: 11px; color: var(--text-secondary); line-height: 1.6; margin-bottom: 12px; }
        .feature-code { background: var(--bg-dark); border-radius: 6px; padding: 10px; font-family: monospace; font-size: 10px; color: var(--page-light); }
        
        .comparison-table { background: var(--bg-card); border: 1px solid var(--border-color); border-radius: 12px; overflow: hidden; margin-bottom: 20px; }
        .comparison-header { background: var(--bg-card-alt); padding: 12px 16px; border-bottom: 1px solid var(--border-color); }
        .comparison-title { font-size: 13px; font-weight: 600; }
        .comparison-table table { width: 100%; border-collapse: collapse; }
        .comparison-table th { background: var(--bg-card-alt); padding: 10px 12px; text-align: left; font-size: 10px; font-weight: 600; color: var(--text-muted); border-bottom: 1px solid var(--border-color); }
        .comparison-table td { padding: 12px; font-size: 11px; border-bottom: 1px solid var(--border-color); vertical-align: middle; }
        .comparison-table tr:hover td { background: var(--bg-hover); }
        
        .best-practices { display: grid; grid-template-columns: repeat(2, 1fr); gap: 16px; margin-bottom: 20px; }
        .practice-card { background: var(--bg-card); border: 1px solid var(--border-color); border-radius: 12px; padding: 20px; }
        .practice-card.do { border-left: 3px solid var(--green); }
        .practice-card.dont { border-left: 3px solid var(--red); }
        .practice-title { font-size: 14px; font-weight: 600; margin-bottom: 12px; display: flex; align-items: center; gap: 8px; }
        .practice-title.do { color: var(--green); }
        .practice-title.dont { color: var(--red); }
        .practice-list { list-style: none; }
        .practice-list li { font-size: 11px; color: var(--text-secondary); padding: 6px 0; border-bottom: 1px solid var(--border-color); display: flex; align-items: flex-start; gap: 8px; }
        .practice-list li:last-child { border-bottom: none; }
        .practice-list li::before { content: '‚úì'; color: var(--green); flex-shrink: 0; }
        .practice-card.dont .practice-list li::before { content: '‚úó'; color: var(--red); }
        
        .agent-grid { display: grid; grid-template-columns: 1fr 1.5fr; gap: 20px; }
        .agent-info { background: var(--bg-card); border: 1px solid var(--border-color); border-radius: 12px; padding: 20px; }
        .agent-avatar { width: 56px; height: 56px; background: linear-gradient(135deg, var(--page-primary), var(--page-light)); border-radius: 14px; display: flex; align-items: center; justify-content: center; font-size: 28px; margin-bottom: 16px; }
        .agent-name { font-size: 18px; font-weight: 600; margin-bottom: 4px; }
        .agent-role { font-size: 11px; color: var(--page-light); margin-bottom: 16px; }
        .agent-desc { font-size: 11px; color: var(--text-secondary); line-height: 1.7; margin-bottom: 16px; }
        .agent-capabilities { list-style: none; }
        .agent-capabilities li { font-size: 11px; color: var(--text-secondary); padding: 6px 0; display: flex; align-items: center; gap: 8px; }
        .agent-capabilities li::before { content: '‚ú¶'; color: var(--page-light); }
        
        .code-panel { background: var(--bg-card); border: 1px solid var(--border-color); border-radius: 12px; overflow: hidden; }
        .code-header { display: flex; align-items: center; background: var(--bg-card-alt); border-bottom: 1px solid var(--border-color); }
        .code-tab { padding: 12px 20px; font-size: 12px; color: var(--text-muted); cursor: pointer; border-bottom: 2px solid transparent; }
        .code-tab.active { color: var(--page-light); border-bottom-color: var(--page-light); background: rgba(249,115,22,0.1); }
        .code-filename { margin-left: auto; padding: 12px 20px; font-size: 11px; color: var(--text-muted); font-family: monospace; }
        .code-content { padding: 16px; font-family: 'Monaco', 'Consolas', monospace; font-size: 11px; line-height: 1.8; background: var(--bg-dark); overflow-x: auto; }
        
        .related-pages { display: grid; grid-template-columns: repeat(3, 1fr); gap: 12px; }
        .related-card { background: var(--bg-card); border: 1px solid var(--border-color); border-radius: 10px; padding: 16px; text-decoration: none; color: inherit; transition: all 0.2s; }
        .related-card:hover { border-color: var(--page-primary); transform: translateY(-2px); }
        .related-num { font-size: 10px; color: var(--page-light); margin-bottom: 4px; }
        .related-title { font-size: 12px; font-weight: 600; margin-bottom: 4px; }
        .related-desc { font-size: 10px; color: var(--text-muted); }
        
        footer { background: var(--bg-card); border-top: 1px solid var(--border-color); padding: 20px 32px; margin-left: var(--sidebar-width); }
        .footer-nav { display: flex; justify-content: space-between; align-items: center; }
        .footer-link { display: flex; align-items: center; gap: 12px; text-decoration: none; color: var(--text-secondary); padding: 12px 20px; background: var(--bg-card-alt); border: 1px solid var(--border-color); border-radius: 10px; transition: all 0.2s; }
        .footer-link:hover { border-color: var(--page-primary); color: var(--text-primary); }
        .footer-link-label { font-size: 10px; color: var(--text-muted); }
        .footer-link-title { font-size: 13px; font-weight: 600; }
        .footer-brand { font-size: 12px; color: var(--text-muted); }
        .footer-brand strong { color: var(--brand-orange); }
        
        @media (max-width: 1024px) {
            .sidebar { display: none; }
            .main-wrapper { margin-left: 0; }
            footer { margin-left: 0; }
            .hero-compact, .best-practices, .agent-grid, .feature-grid { grid-template-columns: 1fr; }
            .concept-grid { grid-template-columns: repeat(2, 1fr); }
            .layer-grid, .related-pages { grid-template-columns: repeat(2, 1fr); }
        }
    </style>
</head>
<body>

<header>
    <a href="index.html" class="logo"><span>STRATEGY</span>HUB</a>
    <div class="header-tagline">Enterprise Technology Knowledge Base</div>
</header>

<aside class="sidebar">
    <div class="sidebar-section">
        <div class="sidebar-title">üîß Category 02</div>
        <ul class="sidebar-nav">
            <li><a href="cat02-data-engineering-overview.html"><span class="nav-icon">üè†</span> Overview</a></li>
            <li><a href="cat02-p1-data-ingestion.html"><span class="nav-icon">üì•</span> 2.1 Data Ingestion</a></li>
            <li><a href="cat02-p2-data-transformation.html" class="active"><span class="nav-icon">üîÑ</span> 2.2 Data Transformation</a></li>
            <li><a href="cat02-p3-databricks.html"><span class="nav-icon">üß±</span> 2.3 Databricks</a></li>
            <li><a href="cat02-p4-snowflake.html"><span class="nav-icon">‚ùÑÔ∏è</span> 2.4 Snowflake</a></li>
            <li><a href="cat02-p5-bigquery.html"><span class="nav-icon">üîç</span> 2.5 BigQuery</a></li>
            <li><a href="cat02-p6-apache-spark.html"><span class="nav-icon">‚ö°</span> 2.6 Apache Spark</a></li>
            <li><a href="cat02-p7-palantir (3).html"><span class="nav-icon">üìÑ</span> cat02-p7-palantir (3).html</a></li>
            <li><a href="cat02-p7-orchestration.html"><span class="nav-icon">üé≠</span> 2.7 Orchestration</a></li>
            <li><a href="cat02-p8-data-quality.html"><span class="nav-icon">‚úÖ</span> 2.8 Data Quality</a></li>
            <li><a href="cat02-p9-observability.html"><span class="nav-icon">üëÅÔ∏è</span> 2.9 Observability</a></li>
            <li><a href="cat02-p10-data-catalogs.html"><span class="nav-icon">üìö</span> 2.10 Data Catalogs</a></li>
            <li><a href="cat02-p11-streaming.html"><span class="nav-icon">üåä</span> 2.11 Streaming</a></li>
            <li><a href="cat02-p12-reverse-etl.html"><span class="nav-icon">‚Ü©Ô∏è</span> 2.12 Reverse ETL</a></li>
        </ul>
    </div>
    <div class="sidebar-section">
        <div class="sidebar-title">üìÑ This Page</div>
        <ul class="sidebar-nav">
            <li><a href="#overview" class="active"><span class="nav-icon">üìñ</span> Overview</a></li>
            <li><a href="#concepts"><span class="nav-icon">üéØ</span> Core Concepts</a></li>
            <li><a href="#layers"><span class="nav-icon">üèóÔ∏è</span> Model Layers</a></li>
            <li><a href="#features"><span class="nav-icon">‚ö°</span> Key Features</a></li>
            <li><a href="#testing"><span class="nav-icon">üß™</span> Testing</a></li>
            <li><a href="#practices"><span class="nav-icon">‚úÖ</span> Best Practices</a></li>
            <li><a href="#agent"><span class="nav-icon">ü§ñ</span> Agent This</a></li>
        </ul>
    </div>
    <div class="sidebar-section">
        <div class="sidebar-title">üìÑ Other Pages</div>
        <ul class="sidebar-nav">
            <li><a href="cat02-p1-data-ingestion.html"><span class="nav-icon">üì•</span> Data Ingestion</a></li>
            <li><a href="cat02-p2-data-transformation.html" class="active"><span class="nav-icon">üîÑ</span> Data Transformation</a></li>
            <li><a href="cat02-p3-databricks.html"><span class="nav-icon">üß±</span> Databricks</a></li>
            <li><a href="cat02-p4-snowflake.html"><span class="nav-icon">‚ùÑÔ∏è</span> Snowflake</a></li>
            <li><a href="cat02-p5-bigquery.html"><span class="nav-icon">üîç</span> BigQuery</a></li>
            <li><a href="cat02-p6-apache-spark.html"><span class="nav-icon">‚ö°</span> Apache Spark</a></li>
            <li><a href="cat02-p7-orchestration.html"><span class="nav-icon">üéº</span> Orchestration</a></li>
            <li><a href="cat02-p8-data-quality.html"><span class="nav-icon">‚úÖ</span> Data Quality</a></li>
            <li><a href="cat02-p9-observability.html"><span class="nav-icon">üëÅÔ∏è</span> Observability</a></li>
            <li><a href="cat02-p10-data-catalogs.html"><span class="nav-icon">üìö</span> Data Catalogs</a></li>
            <li><a href="cat02-p11-streaming.html"><span class="nav-icon">üåä</span> Streaming</a></li>
            <li><a href="cat02-p12-reverse-etl.html"><span class="nav-icon">‚Ü©Ô∏è</span> Reverse ETL</a></li>
        </ul>
    </div>
</aside>

<div class="main-wrapper">
    <div class="main-content">
        
        <!-- HERO -->
        <section class="hero-compact" id="overview">
            <div class="hero-left">
                <span class="hero-tag">üîÑ Page 2.2</span>
                <h1>Data Transformation (dbt)</h1>
                <p>Master modern data transformation with dbt (data build tool). Learn to build modular, tested, documented SQL transformations that turn raw data into analytics-ready datasets using software engineering best practices.</p>
            </div>
            <div class="hero-metrics">
                <div class="hero-metric"><div class="hero-metric-value">40K+</div><div class="hero-metric-label">Companies Using dbt</div></div>
                <div class="hero-metric"><div class="hero-metric-value">SQL</div><div class="hero-metric-label">Primary Language</div></div>
                <div class="hero-metric"><div class="hero-metric-value">Jinja</div><div class="hero-metric-label">Templating Engine</div></div>
                <div class="hero-metric"><div class="hero-metric-value">Git</div><div class="hero-metric-label">Version Control</div></div>
            </div>
        </section>

        <!-- OVERVIEW -->
        <section class="module">
            <div class="module-header">
                <div class="module-icon">üìñ</div>
                <div class="module-info">
                    <h2>What is dbt?</h2>
                    <p>The T in ELT done right</p>
                </div>
            </div>
            
            <div class="overview-content">
                <h3>Definition & Purpose</h3>
                <p>dbt (data build tool) is an open-source transformation framework that enables analytics engineers to transform data in their warehouse using SQL. It brings software engineering practices‚Äîversion control, testing, documentation, modularity‚Äîto data transformation, making analytics pipelines more reliable and maintainable.</p>
                
                <h3>The Analytics Engineering Movement</h3>
                <p>dbt pioneered the "analytics engineering" discipline‚Äîa hybrid of data engineering and analytics. Instead of writing one-off scripts or using drag-and-drop ETL tools, analytics engineers write modular SQL models that are version-controlled, tested, and documented. This approach has become the industry standard for modern data teams.</p>
                
                <h3>How dbt Works</h3>
                <p>dbt compiles SQL models with Jinja templating, then executes them against your data warehouse (Snowflake, BigQuery, Databricks, Redshift). It manages dependencies between models, runs tests, generates documentation, and tracks data lineage‚Äîall from simple SELECT statements that define what you want, not how to build it.</p>
            </div>
        </section>

        <!-- CORE CONCEPTS -->
        <section class="module" id="concepts">
            <div class="module-header">
                <div class="module-icon">üéØ</div>
                <div class="module-info">
                    <h2>Core Concepts</h2>
                    <p>The building blocks of dbt</p>
                </div>
            </div>
            
            <div class="concept-grid">
                <div class="concept-card">
                    <div class="concept-icon">üìÑ</div>
                    <div class="concept-title">Models</div>
                    <div class="concept-desc">SQL SELECT statements that define transformations. Each model = one table or view.</div>
                </div>
                <div class="concept-card">
                    <div class="concept-icon">üì¶</div>
                    <div class="concept-title">Sources</div>
                    <div class="concept-desc">Raw data tables from your ingestion layer. Defined in YAML for lineage tracking.</div>
                </div>
                <div class="concept-card">
                    <div class="concept-icon">üß™</div>
                    <div class="concept-title">Tests</div>
                    <div class="concept-desc">Assertions about your data: unique, not null, accepted values, relationships.</div>
                </div>
                <div class="concept-card">
                    <div class="concept-icon">üìö</div>
                    <div class="concept-title">Documentation</div>
                    <div class="concept-desc">Auto-generated docs with descriptions, lineage graphs, and column definitions.</div>
                </div>
            </div>
            
            <!-- DAG Visualization -->
            <div class="viz-container">
                <div class="viz-header">
                    <div class="viz-title">üìä dbt Model DAG (Directed Acyclic Graph)</div>
                    <div class="viz-badge">Lineage Example</div>
                </div>
                <div class="viz-canvas">
                    <svg viewBox="0 0 900 280" style="width: 100%; height: auto;">
                        <!-- Sources -->
                        <g transform="translate(30, 40)">
                            <text x="60" y="0" text-anchor="middle" fill="#FB923C" font-size="11" font-weight="600">SOURCES</text>
                            <rect x="0" y="15" width="120" height="40" rx="6" fill="#3B82F620" stroke="#3B82F6" stroke-width="2"/>
                            <text x="60" y="40" text-anchor="middle" fill="#fff" font-size="10">raw_orders</text>
                            <rect x="0" y="65" width="120" height="40" rx="6" fill="#3B82F620" stroke="#3B82F6" stroke-width="2"/>
                            <text x="60" y="90" text-anchor="middle" fill="#fff" font-size="10">raw_customers</text>
                            <rect x="0" y="115" width="120" height="40" rx="6" fill="#3B82F620" stroke="#3B82F6" stroke-width="2"/>
                            <text x="60" y="140" text-anchor="middle" fill="#fff" font-size="10">raw_products</text>
                        </g>
                        
                        <!-- Staging -->
                        <g transform="translate(220, 40)">
                            <text x="60" y="0" text-anchor="middle" fill="#FB923C" font-size="11" font-weight="600">STAGING</text>
                            <rect x="0" y="15" width="120" height="40" rx="6" fill="#F59E0B20" stroke="#F59E0B" stroke-width="2"/>
                            <text x="60" y="40" text-anchor="middle" fill="#fff" font-size="10">stg_orders</text>
                            <rect x="0" y="65" width="120" height="40" rx="6" fill="#F59E0B20" stroke="#F59E0B" stroke-width="2"/>
                            <text x="60" y="90" text-anchor="middle" fill="#fff" font-size="10">stg_customers</text>
                            <rect x="0" y="115" width="120" height="40" rx="6" fill="#F59E0B20" stroke="#F59E0B" stroke-width="2"/>
                            <text x="60" y="140" text-anchor="middle" fill="#fff" font-size="10">stg_products</text>
                        </g>
                        
                        <!-- Intermediate -->
                        <g transform="translate(410, 60)">
                            <text x="60" y="0" text-anchor="middle" fill="#FB923C" font-size="11" font-weight="600">INTERMEDIATE</text>
                            <rect x="0" y="15" width="120" height="40" rx="6" fill="#8B5CF620" stroke="#8B5CF6" stroke-width="2"/>
                            <text x="60" y="40" text-anchor="middle" fill="#fff" font-size="10">int_orders_enriched</text>
                            <rect x="0" y="65" width="120" height="40" rx="6" fill="#8B5CF620" stroke="#8B5CF6" stroke-width="2"/>
                            <text x="60" y="90" text-anchor="middle" fill="#fff" font-size="10">int_customer_orders</text>
                        </g>
                        
                        <!-- Marts -->
                        <g transform="translate(600, 40)">
                            <text x="60" y="0" text-anchor="middle" fill="#FB923C" font-size="11" font-weight="600">MARTS</text>
                            <rect x="0" y="15" width="120" height="40" rx="6" fill="#10B98120" stroke="#10B981" stroke-width="2"/>
                            <text x="60" y="40" text-anchor="middle" fill="#fff" font-size="10">fct_orders</text>
                            <rect x="0" y="65" width="120" height="40" rx="6" fill="#10B98120" stroke="#10B981" stroke-width="2"/>
                            <text x="60" y="90" text-anchor="middle" fill="#fff" font-size="10">dim_customers</text>
                            <rect x="0" y="115" width="120" height="40" rx="6" fill="#10B98120" stroke="#10B981" stroke-width="2"/>
                            <text x="60" y="140" text-anchor="middle" fill="#fff" font-size="10">dim_products</text>
                        </g>
                        
                        <!-- Exposure -->
                        <g transform="translate(790, 70)">
                            <text x="45" y="0" text-anchor="middle" fill="#FB923C" font-size="11" font-weight="600">EXPOSURE</text>
                            <rect x="0" y="15" width="90" height="60" rx="6" fill="#EC489920" stroke="#EC4899" stroke-width="2"/>
                            <text x="45" y="40" text-anchor="middle" fill="#fff" font-size="10">üìä Dashboard</text>
                            <text x="45" y="55" text-anchor="middle" fill="#6a6a7a" font-size="8">Looker / Tableau</text>
                        </g>
                        
                        <!-- Arrows -->
                        <defs>
                            <marker id="arrowOrange" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
                                <path d="M0,0 L0,6 L9,3 z" fill="#FB923C"/>
                            </marker>
                        </defs>
                        <!-- Source to Staging -->
                        <path d="M 150 75 L 220 75" stroke="#FB923C" stroke-width="1.5" marker-end="url(#arrowOrange)"/>
                        <path d="M 150 125 L 220 125" stroke="#FB923C" stroke-width="1.5" marker-end="url(#arrowOrange)"/>
                        <path d="M 150 175 L 220 175" stroke="#FB923C" stroke-width="1.5" marker-end="url(#arrowOrange)"/>
                        <!-- Staging to Intermediate -->
                        <path d="M 340 75 C 380 75, 380 95, 410 95" stroke="#FB923C" stroke-width="1.5" marker-end="url(#arrowOrange)"/>
                        <path d="M 340 125 L 410 125" stroke="#FB923C" stroke-width="1.5" marker-end="url(#arrowOrange)"/>
                        <path d="M 340 175 C 380 175, 380 145, 410 145" stroke="#FB923C" stroke-width="1.5" marker-end="url(#arrowOrange)"/>
                        <!-- Intermediate to Marts -->
                        <path d="M 530 95 C 560 95, 560 75, 600 75" stroke="#FB923C" stroke-width="1.5" marker-end="url(#arrowOrange)"/>
                        <path d="M 530 145 C 560 145, 560 125, 600 125" stroke="#FB923C" stroke-width="1.5" marker-end="url(#arrowOrange)"/>
                        <path d="M 530 145 C 570 145, 570 175, 600 175" stroke="#FB923C" stroke-width="1.5" marker-end="url(#arrowOrange)"/>
                        <!-- Marts to Exposure -->
                        <path d="M 720 75 L 790 100" stroke="#FB923C" stroke-width="1.5" marker-end="url(#arrowOrange)"/>
                        <path d="M 720 125 L 790 115" stroke="#FB923C" stroke-width="1.5" marker-end="url(#arrowOrange)"/>
                        
                        <!-- Legend -->
                        <g transform="translate(30, 210)">
                            <rect x="0" y="0" width="850" height="50" rx="8" fill="#1a1a2e" stroke="#2a2a3e"/>
                            <rect x="20" y="15" width="12" height="12" fill="#3B82F620" stroke="#3B82F6"/>
                            <text x="40" y="25" fill="#6a6a7a" font-size="9">Sources (raw tables)</text>
                            <rect x="150" y="15" width="12" height="12" fill="#F59E0B20" stroke="#F59E0B"/>
                            <text x="170" y="25" fill="#6a6a7a" font-size="9">Staging (clean, rename)</text>
                            <rect x="310" y="15" width="12" height="12" fill="#8B5CF620" stroke="#8B5CF6"/>
                            <text x="330" y="25" fill="#6a6a7a" font-size="9">Intermediate (joins, logic)</text>
                            <rect x="490" y="15" width="12" height="12" fill="#10B98120" stroke="#10B981"/>
                            <text x="510" y="25" fill="#6a6a7a" font-size="9">Marts (business entities)</text>
                            <rect x="660" y="15" width="12" height="12" fill="#EC489920" stroke="#EC4899"/>
                            <text x="680" y="25" fill="#6a6a7a" font-size="9">Exposures (downstream)</text>
                        </g>
                    </svg>
                </div>
            </div>
        </section>

        <!-- MODEL LAYERS -->
        <section class="module" id="layers">
            <div class="module-header">
                <div class="module-icon">üèóÔ∏è</div>
                <div class="module-info">
                    <h2>Model Layers</h2>
                    <p>Organizing transformations for maintainability</p>
                </div>
            </div>
            
            <div class="layer-grid">
                <div class="layer-card">
                    <div class="layer-header staging">
                        <div class="layer-title">Staging Layer</div>
                        <div class="layer-subtitle">stg_* models</div>
                    </div>
                    <div class="layer-body">
                        <div class="layer-desc">1:1 with source tables. Light transformations: rename columns, cast types, filter deleted records. No joins.</div>
                        <ul class="layer-examples">
                            <li>stg_stripe__payments</li>
                            <li>stg_shopify__orders</li>
                            <li>stg_salesforce__accounts</li>
                        </ul>
                    </div>
                </div>
                
                <div class="layer-card">
                    <div class="layer-header intermediate">
                        <div class="layer-title">Intermediate Layer</div>
                        <div class="layer-subtitle">int_* models</div>
                    </div>
                    <div class="layer-body">
                        <div class="layer-desc">Complex transformations, joins between staging models, business logic. Not exposed to end users.</div>
                        <ul class="layer-examples">
                            <li>int_orders__pivoted</li>
                            <li>int_payments__aggregated</li>
                            <li>int_users__enriched</li>
                        </ul>
                    </div>
                </div>
                
                <div class="layer-card">
                    <div class="layer-header marts">
                        <div class="layer-title">Marts Layer</div>
                        <div class="layer-subtitle">fct_* / dim_* models</div>
                    </div>
                    <div class="layer-body">
                        <div class="layer-desc">Business entities ready for consumption. Facts (metrics) and dimensions (attributes). User-facing.</div>
                        <ul class="layer-examples">
                            <li>fct_orders</li>
                            <li>dim_customers</li>
                            <li>dim_products</li>
                        </ul>
                    </div>
                </div>
            </div>
            
            <!-- Code Example -->
            <div class="code-example">
                <div class="code-example-header">
                    <div class="code-example-title">Example: Staging Model</div>
                    <div class="code-example-file">models/staging/stripe/stg_stripe__payments.sql</div>
                </div>
                <div class="code-example-content">
                    <pre><span class="code-jinja">{{</span> <span class="code-function">config</span>(materialized=<span class="code-string">'view'</span>) <span class="code-jinja">}}</span>

<span class="code-keyword">with</span> source <span class="code-keyword">as</span> (
    <span class="code-keyword">select</span> * <span class="code-keyword">from</span> <span class="code-jinja">{{</span> <span class="code-function">source</span>(<span class="code-string">'stripe'</span>, <span class="code-string">'payments'</span>) <span class="code-jinja">}}</span>
),

renamed <span class="code-keyword">as</span> (
    <span class="code-keyword">select</span>
        id <span class="code-keyword">as</span> payment_id,
        order_id,
        amount <span class="code-keyword">as</span> amount_cents,
        amount / <span class="code-keyword">100.0</span> <span class="code-keyword">as</span> amount_dollars,
        status <span class="code-keyword">as</span> payment_status,
        created_at <span class="code-keyword">as</span> created_at,
        <span class="code-jinja">{{</span> <span class="code-function">dbt_utils.generate_surrogate_key</span>([<span class="code-string">'id'</span>]) <span class="code-jinja">}}</span> <span class="code-keyword">as</span> payment_key
    <span class="code-keyword">from</span> source
    <span class="code-keyword">where</span> _fivetran_deleted = <span class="code-keyword">false</span>
)

<span class="code-keyword">select</span> * <span class="code-keyword">from</span> renamed</pre>
                </div>
            </div>
        </section>

        <!-- KEY FEATURES -->
        <section class="module" id="features">
            <div class="module-header">
                <div class="module-icon">‚ö°</div>
                <div class="module-info">
                    <h2>Key Features</h2>
                    <p>What makes dbt powerful</p>
                </div>
            </div>
            
            <div class="feature-grid">
                <div class="feature-card">
                    <div class="feature-header">
                        <div class="feature-icon">üîó</div>
                        <div class="feature-title">ref() Function</div>
                    </div>
                    <div class="feature-desc">Reference other models to build dependency graph. dbt automatically runs models in correct order and handles schema changes.</div>
                    <div class="feature-code">select * from {{ ref('stg_orders') }}</div>
                </div>
                
                <div class="feature-card">
                    <div class="feature-header">
                        <div class="feature-icon">üì¶</div>
                        <div class="feature-title">source() Function</div>
                    </div>
                    <div class="feature-desc">Reference raw source tables with freshness checks. Define sources in YAML for lineage and documentation.</div>
                    <div class="feature-code">select * from {{ source('stripe', 'payments') }}</div>
                </div>
                
                <div class="feature-card">
                    <div class="feature-header">
                        <div class="feature-icon">üé®</div>
                        <div class="feature-title">Jinja Templating</div>
                    </div>
                    <div class="feature-desc">Use loops, conditionals, and macros to generate SQL dynamically. DRY principle for data transformations.</div>
                    <div class="feature-code">{% for col in columns %} {{ col }}, {% endfor %}</div>
                </div>
                
                <div class="feature-card">
                    <div class="feature-header">
                        <div class="feature-icon">üìä</div>
                        <div class="feature-title">Materializations</div>
                    </div>
                    <div class="feature-desc">Control how models are built: view, table, incremental, ephemeral. Optimize for performance and cost.</div>
                    <div class="feature-code">{{ config(materialized='incremental') }}</div>
                </div>
            </div>
        </section>

        <!-- TESTING -->
        <section class="module" id="testing">
            <div class="module-header">
                <div class="module-icon">üß™</div>
                <div class="module-info">
                    <h2>Testing in dbt</h2>
                    <p>Ensuring data quality at every step</p>
                </div>
            </div>
            
            <div class="comparison-table">
                <div class="comparison-header">
                    <div class="comparison-title">Built-in Test Types</div>
                </div>
                <table>
                    <thead>
                        <tr>
                            <th>Test</th>
                            <th>Purpose</th>
                            <th>Example</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><strong>unique</strong></td>
                            <td>No duplicate values in column</td>
                            <td><code>- unique</code> on customer_id</td>
                        </tr>
                        <tr>
                            <td><strong>not_null</strong></td>
                            <td>No NULL values in column</td>
                            <td><code>- not_null</code> on order_id</td>
                        </tr>
                        <tr>
                            <td><strong>accepted_values</strong></td>
                            <td>Only specific values allowed</td>
                            <td><code>values: ['pending', 'shipped', 'delivered']</code></td>
                        </tr>
                        <tr>
                            <td><strong>relationships</strong></td>
                            <td>Foreign key integrity</td>
                            <td><code>to: ref('dim_customers')</code></td>
                        </tr>
                    </tbody>
                </table>
            </div>
            
            <div class="code-example">
                <div class="code-example-header">
                    <div class="code-example-title">Example: Model Tests in YAML</div>
                    <div class="code-example-file">models/marts/schema.yml</div>
                </div>
                <div class="code-example-content">
                    <pre><span class="code-keyword">version</span>: 2

<span class="code-keyword">models</span>:
  - <span class="code-keyword">name</span>: fct_orders
    <span class="code-keyword">description</span>: <span class="code-string">"Order fact table with one row per order"</span>
    <span class="code-keyword">columns</span>:
      - <span class="code-keyword">name</span>: order_id
        <span class="code-keyword">description</span>: <span class="code-string">"Primary key"</span>
        <span class="code-keyword">tests</span>:
          - unique
          - not_null
      
      - <span class="code-keyword">name</span>: customer_id
        <span class="code-keyword">description</span>: <span class="code-string">"FK to dim_customers"</span>
        <span class="code-keyword">tests</span>:
          - not_null
          - relationships:
              <span class="code-keyword">to</span>: ref('dim_customers')
              <span class="code-keyword">field</span>: customer_id
      
      - <span class="code-keyword">name</span>: status
        <span class="code-keyword">tests</span>:
          - accepted_values:
              <span class="code-keyword">values</span>: ['pending', 'processing', 'shipped', 'delivered']</pre>
                </div>
            </div>
        </section>

        <!-- BEST PRACTICES -->
        <section class="module" id="practices">
            <div class="module-header">
                <div class="module-icon">‚úÖ</div>
                <div class="module-info">
                    <h2>Best Practices</h2>
                    <p>Guidelines for maintainable dbt projects</p>
                </div>
            </div>
            
            <div class="best-practices">
                <div class="practice-card do">
                    <div class="practice-title do">‚úì Do's</div>
                    <ul class="practice-list">
                        <li>Use consistent naming conventions (stg_, int_, fct_, dim_)</li>
                        <li>One model per file, one transformation purpose per model</li>
                        <li>Add tests to every model, especially primary keys</li>
                        <li>Document models and columns in schema.yml</li>
                        <li>Use ref() and source() functions exclusively</li>
                        <li>Leverage incremental models for large tables</li>
                        <li>Create reusable macros for repeated logic</li>
                        <li>Use packages (dbt_utils, dbt_expectations) for common patterns</li>
                    </ul>
                </div>
                <div class="practice-card dont">
                    <div class="practice-title dont">‚úó Don'ts</div>
                    <ul class="practice-list">
                        <li>Don't hardcode database/schema names‚Äîuse variables</li>
                        <li>Avoid complex logic in staging models‚Äîkeep them simple</li>
                        <li>Never reference raw tables directly‚Äîalways use source()</li>
                        <li>Don't skip the intermediate layer for complex transformations</li>
                        <li>Avoid circular dependencies between models</li>
                        <li>Don't materialize everything as tables‚Äîuse views for simple models</li>
                        <li>Never commit sensitive data in seed files</li>
                        <li>Don't ignore failing tests‚Äîfix data quality issues immediately</li>
                    </ul>
                </div>
            </div>
        </section>

        <!-- AGENT THIS -->
        <section class="module" id="agent">
            <div class="module-header">
                <div class="module-icon">ü§ñ</div>
                <div class="module-info">
                    <h2>Agent This</h2>
                    <p>AI-powered assistant for dbt development</p>
                </div>
            </div>
            
            <div class="agent-grid">
                <div class="agent-info">
                    <div class="agent-avatar">üîÑ</div>
                    <div class="agent-name">dbtModelAgent</div>
                    <div class="agent-role">Analytics Engineering Specialist</div>
                    <div class="agent-desc">Expert in dbt development, data modeling, and analytics engineering best practices. Specializes in writing efficient SQL, designing model layers, implementing tests, and optimizing dbt projects.</div>
                    <ul class="agent-capabilities">
                        <li>Generate dbt models from requirements</li>
                        <li>Design staging/intermediate/marts layers</li>
                        <li>Write comprehensive tests and docs</li>
                        <li>Optimize incremental models</li>
                        <li>Debug compilation and runtime errors</li>
                        <li>Refactor legacy SQL to dbt patterns</li>
                    </ul>
                </div>
                
                <div class="code-panel">
                    <div class="code-header">
                        <div class="code-tab active">Agent Definition</div>
                        <div class="code-tab">Model Task</div>
                        <div class="code-filename">dbt_agent.py</div>
                    </div>
                    <div class="code-content">
                        <pre><span class="code-comment"># dbt_agent.py - dbt Development Agent</span>
<span class="code-keyword">from</span> crewai <span class="code-keyword">import</span> Agent, Task, Crew

<span class="code-function">dbt_agent</span> = Agent(
    role=<span class="code-string">"Analytics Engineer"</span>,
    goal=<span class="code-string">"Build maintainable dbt transformations"</span>,
    backstory=<span class="code-string">"""Expert in dbt, SQL optimization, and 
    data modeling. Deep knowledge of staging/marts 
    patterns, Jinja templating, incremental models, 
    and testing strategies."""</span>,
    tools=[
        SQLGenerator(),
        ModelDesigner(),
        TestWriter(),
        DocGenerator(),
        PerformanceAnalyzer(),
    ]
)

<span class="code-function">dbt_task</span> = Task(
    description=<span class="code-string">"""
    1. Analyze source data and requirements
    2. Design model layer structure (stg/int/marts)
    3. Write SQL models with proper refs
    4. Add comprehensive tests (unique, not_null, etc)
    5. Generate documentation in schema.yml
    6. Optimize materialization strategy
    7. Create lineage diagram
    """</span>,
    agent=dbt_agent,
    expected_output=<span class="code-string">"Production-ready dbt models with tests"</span>
)

<span class="code-comment"># Execute dbt development</span>
crew = Crew(agents=[dbt_agent], tasks=[dbt_task])
result = crew.kickoff()</pre>
                    </div>
                </div>
            </div>
        </section>

        <!-- RELATED PAGES -->
        <section class="module" id="related">
            <div class="module-header">
                <div class="module-icon">üîó</div>
                <div class="module-info">
                    <h2>Related Pages</h2>
                    <p>Continue learning with these related topics</p>
                </div>
            </div>
            
            <div class="related-pages">
                <a href="cat02-p1-data-ingestion.html" class="related-card">
                    <div class="related-num">Page 2.1</div>
                    <div class="related-title">Data Ingestion</div>
                    <div class="related-desc">Get data into your warehouse for dbt to transform</div>
                </a>
                <a href="cat02-p8-data-quality.html" class="related-card">
                    <div class="related-num">Page 2.8</div>
                    <div class="related-title">Data Quality</div>
                    <div class="related-desc">Advanced testing with Great Expectations</div>
                </a>
                <a href="cat02-p7-orchestration.html" class="related-card">
                    <div class="related-num">Page 2.7</div>
                    <div class="related-title">Orchestration</div>
                    <div class="related-desc">Schedule and orchestrate dbt runs</div>
                </a>
            </div>
        </section>

    </div>
</div>

<footer>
    <div class="footer-nav">
        <a href="cat02-p1-data-ingestion.html" class="footer-link">
            <span>‚Üê</span>
            <div>
                <div class="footer-link-label">Previous Page</div>
                <div class="footer-link-title">2.1: Data Ingestion</div>
            </div>
        </a>
        <div class="footer-brand"><strong>STRATEGY</strong>HUB ‚Ä¢ Page 2.2 of 12</div>
        <a href="cat02-p3-databricks.html" class="footer-link">
            <div>
                <div class="footer-link-label">Next Page</div>
                <div class="footer-link-title">2.3: Databricks Platform</div>
            </div>
            <span>‚Üí</span>
        </a>
    </div>
</footer>

</body>
</html>
